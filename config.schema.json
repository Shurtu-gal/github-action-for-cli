{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "https://github.com/asyncapi/github-action-for-cli/blob/master/config.schema.json",
  "title": "GitHub Action for CLI configuration file",
  "type": "object",
  "description": "The configuration file for the GitHub Action for CLI",
  "required": [
    "files"
  ],
  "properties": {
    "files": {
      "type": "array",
      "description": "The list of files to be processed by the GitHub Action for CLI",
      "items": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "description": "The file to be processed by the GitHub Action for CLI",
            "examples": [
              "./asyncapi.yaml"
            ]
          },
          "command": {
            "type": "string",
            "description": "The command to be executed by the GitHub Action for CLI",
            "enum": [
              "generate",
              "validate",
              "optimize",
              "custom"
            ],
            "examples": [
              "validate"
            ]
          },
          "parameters": {
            "type": "string",
            "description": "Additional parameters to be passed to the command",
            "examples": [
              "--output ./output"
            ]
          },
          "type": {
            "type": "string",
            "description": "Type of generation to be executed by the CLI. Required if command is generate",
            "enum": [
              "template",
              "model"
            ]
          },
          "language": {
            "type": "string",
            "description": "Language in which the models should be generated. Required if command is generate and type is model",
            "enum": [
              "typescript",
              "csharp",
              "golang",
              "java",
              "javascript",
              "dart",
              "python",
              "rust",
              "kotlin",
              "php",
              "cplusplus"
            ]
          },
          "template": {
            "type": "string",
            "description": "Template to be used for generation. Required if command is generate and type is template. Look at ",
            "examples": [
              "@asyncapi/html-template"
            ]
          }
        },
        "required": [
          "file",
          "command"
        ],
        "allOf": [
          {
            "if": {
              "properties": {
                "command": {
                  "const": "generate"
                }
              }
            },
            "then": {
              "required": [
                "type"
              ],
              "allOf": [
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "model"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "language"
                    ]
                  }
                },
                {
                  "if": {
                    "properties": {
                      "type": {
                        "const": "template"
                      }
                    }
                  },
                  "then": {
                    "required": [
                      "template"
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    }
  }
}